{"version":3,"file":"bandoneon.js","sources":["../src/index.js"],"sourcesContent":["/* main js-file. Build with rollup -c */\r\n\r\nfunction Widget(id, options) {\r\n    Object.setPrototypeOf(this, {\r\n\r\n        defaults: {\r\n            /**\r\n             * Speed in pixels per second, Integer or Float\r\n             */\r\n            speed: 200,\r\n\r\n            /**\r\n             * Timing function; 'linear' would be another sensible value.\r\n             * @link https://developer.mozilla.org/en-US/docs/Web/CSS/single-transition-timing-function\r\n             */\r\n            timing: 'ease-in-out'\r\n        },\r\n\r\n        openSection: function(section)    {\r\n            let h = section.scrollHeight,\r\n                dur = 1000 * h / this.speed;\r\n\r\n            Object.assign(section.style, {\r\n                height: `${h}px`,\r\n                transitionDuration: `${dur}ms`,\r\n            });\r\n        },\r\n\r\n        closeSection: function(section)    {\r\n            let h = section.scrollHeight,\r\n                dur = 1000 * h / this.speed;\r\n\r\n            Object.assign(section.style, {\r\n                height: '0',\r\n                transitionDuration: `${dur}ms`,\r\n            });\r\n        },\r\n\r\n    });\r\n\r\n    this.element = document.getElementById(id);\r\n\r\n    this.element.classList.add('sjaakp-bandoneon');\r\n\r\n    let headings = this.element.querySelectorAll(':nth-child(odd)');\r\n\r\n    headings.forEach(heading => {\r\n        let section = heading.nextElementSibling;\r\n        if (section)    {\r\n            Object.assign(section.style, {\r\n                transitionProperty: 'height',\r\n                transitionTimingFunction: this.timing\r\n            });\r\n            if (heading.classList.contains('open'))   {\r\n                this.openSection(section);\r\n            }\r\n            heading.addEventListener('click', e => {\r\n                let open = heading.classList.toggle('open');\r\n                if (open)   {\r\n                    this.openSection(section);\r\n                    let close = this.element.querySelectorAll('.open');\r\n                    close.forEach(toClose => {\r\n                        if (toClose !== heading)    {\r\n                            toClose.classList.remove('open');\r\n                            this.closeSection(toClose.nextElementSibling);\r\n                        }\r\n                    });\r\n                }\r\n                else    {\r\n                    this.closeSection(section);\r\n                }\r\n            });\r\n        }\r\n    });\r\n\r\n    Object.assign(this, this.defaults, options);\r\n}\r\n\r\nfunction widget(id, options) {\r\n    return new this.Widget(id, options);\r\n}\r\n\r\nexport {Widget, widget};\r\n\r\n// const Bandoneon = { Widget, widget };"],"names":["id","options","Object","setPrototypeOf","this","defaults","speed","timing","openSection","section","let","h","scrollHeight","dur","assign","style","height","transitionDuration","closeSection","element","document","getElementById","classList","add","querySelectorAll","forEach","heading","nextElementSibling","transitionProperty","transitionTimingFunction","contains","addEventListener","e","toggle","toClose","remove","Widget"],"mappings":";;;;uDAEA,SAAgBA,EAAIC,cAChBC,OAAOC,eAAeC,KAAM,CAExBC,SAAU,CAINC,MAAO,IAMPC,OAAQ,eAGZC,YAAa,SAASC,GAClBC,IAAIC,EAAIF,EAAQG,aACZC,EAAM,IAAOF,EAAIP,KAAKE,MAE1BJ,OAAOY,OAAOL,EAAQM,MAAO,CACzBC,OAAWL,OACXM,mBAAuBJ,UAI/BK,aAAc,SAAST,GACnBC,IACIG,EAAM,IADFJ,EAAQG,aACKR,KAAKE,MAE1BJ,OAAOY,OAAOL,EAAQM,MAAO,CACzBC,OAAQ,IACRC,mBAAuBJ,YAMnCT,KAAKe,QAAUC,SAASC,eAAerB,GAEvCI,KAAKe,QAAQG,UAAUC,IAAI,oBAEZnB,KAAKe,QAAQK,iBAAiB,mBAEpCC,iBAAQC,GACbhB,IAAID,EAAUiB,EAAQC,mBAClBlB,IACAP,OAAOY,OAAOL,EAAQM,MAAO,CACzBa,mBAAoB,SACpBC,yBAA0BzB,EAAKG,SAE/BmB,EAAQJ,UAAUQ,SAAS,SAC3B1B,EAAKI,YAAYC,GAErBiB,EAAQK,iBAAiB,iBAASC,GACnBN,EAAQJ,UAAUW,OAAO,SAEhC7B,EAAKI,YAAYC,GACLL,EAAKe,QAAQK,iBAAiB,SACpCC,iBAAQS,GACNA,IAAYR,IACZQ,EAAQZ,UAAUa,OAAO,QACzB/B,EAAKc,aAAagB,EAAQP,wBAKlCvB,EAAKc,aAAaT,QAMlCP,OAAOY,OAAOV,KAAMA,KAAKC,SAAUJ,aAGvC,SAAgBD,EAAIC,GAChB,OAAO,IAAIG,KAAKgC,OAAOpC,EAAIC"}